

# generar certificado con claves publicas y privadas
echo"Generando claves"
sudo openssl genrsa -out certificado.crt 2048


# Extraer mediante rsa las claves publica y privada 

echo"Ectraer claves publicas y privadas del certificado"
sudo openssl rsa -in certificado.crt -out clave_publica.key -pubout

sudo openssl rsa -in certificado.crt -out clave_privada.key


# generar certificado con claves publicas y privadas


# Crear dos claves una amigo1 y otra amigo2 ambos se compartiran las claves publicas, el amigo 1 cifra con la clave 
	#publica del  amigo 2 y viseversal a enviarlas el amigo uno descifrara con su clave privada

# Cifrar con clave privada rsa
sudo openssl rsautl -in texto.txt -out textov3.rsa -inkey clave_privada.key -encrypt

# Descifrar con la clave publica
sudo openssl rsautl -in textov3.rsa -out texto_recuperadov3.txt -inkey clave_publica.key -pubin -decrypt

sudo openssl genrsa -out certificado.crt 2048


# Extraer mediante rsa las claves publica y privada 
echo"Clave publica"
sudo openssl rsa -in certificado_1.crt -out clave_publica_1.key -pubout

sudo openssl rsa -in certificado_1.crt -out clave_privada_1.key

# Cifrar con clave publica de amigo 2
sudo openssl rsautl -in texto.txt -out texto_2.rsa -inkey clave_publica_2.key -pubin -encrypt

# Cifrar con clave publica rsa
sudo openssl rsautl -in texto.txt -out texto.rsa -inkey clave_publica.key -pubin -encrypt

# Descifrar con la clave privada

sudo openssl rsautl -in texto.rsa -out texto_recuperado.txt -inkey clave_privada.key -decrypt

sudo openssl rsautl -in texto.rsa -out texto_recuperado.txt -inkey certificado.crt -decrypt

# Para cifrar imagen 
sudo openssl enc -aes-256-cbc -salt -in HTTPS_TLS.png -out HTTPS_TLS.png.enc -k UNAN

# Para descifrar la imagen 
sudo openssl enc -aes-256-cbc -d -in HTTPS_TLS.png.enc -out HTTPS_TLS_N.png -k UNAN
